<html>

<head>
    <title>Generating Chords</title>
    <link rel = "stylesheet" href ="ChordStyling.css">
</head>


<body>

    <header> 
        <h1>Chord Progression Generator</h1>
    </header>

    <aside>
        <p>Hi and welcome</p>
    </aside>   
    
    <table>
        <thead>
            <tr>
                <th>Customization for Generation</th>
            </tr>
        </thead>

        <tbody>
            <tr>
                <td>
                    <label for = "keys">Select Key</label>
                    <select name = "keys" id = "keyList">
                        <optgroup label = "Major Keys">
                            <option value = "C">C</option>
                            <option value = "G#">G#</option>
                        </optgroup>
                        <optgroup label = "Minor Keys">
                            <option value = "Em">Em</option>
                            <option value = "Bb">Bb</option>
                        </optgroup>
                    </select>    
                </td>
                <td>
                    <label for = "lengthOfProgression">Select Length</label>
                    <select name = "lengthOfProgression" id = "selectLength">
                        <option value = "3">3</option>
                        <option value = "4">4</option>
                    </select>
                </td>
                <td>
                    <label for = "placeholder">a</label>
                    <select name = "placeholder" id = "placeholder">
                        <option value = "3">3</option>
                        <option value = "4">4</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>
                    <label>Inversions?</label>
                    <input type = "checkbox" id = "inversions?">
                </td>
                <td>
                    <p>placeholder</p>
                </td>
            </tr>
        </tbody>
    </table>   
    
    <button type = "submit" onclick = "hideAndShowElements(); getChord();" id = "generateButton">Create Progresssion</button>

    <p id="test">i</p>
    <div id = "hidden">
    <div id = "musicStaff"></div>
    <p>Adjust display</p>
    </div>

    <script src = "scripting.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vexflow@4.0.3/build/cjs/vexflow.js"></script>
    <script>
       const { Factory, EasyScore, System } = Vex.Flow;

        const vf = new Factory({
        renderer: { elementId: 'musicStaff', width: 500, height: 200 },
        });

        const score = vf.EasyScore();
        const system = vf.System();

        const chordsTest = ["C#5", "E5"];

        system
        .addStave({
            voices: [
            score.voice(score.notes(chordsTest[1] + '/q, B4, A4, G#4', { stem: 'up' })),
            //score.voice(score.notes('C#4/h, C#4', { stem: 'down' })),
            ],
        })
        .addClef('treble')
        .addTimeSignature('4/4');

        vf.draw();

        function hideAndShowElements(){

            var x = document.getElementById("hidden");

            if (x.style.display === "none") {
                x.style.display = "block";
            } else {
                x.style.display = "none";
            }
        }

        function getChord(rootNote = 'C', chordType = 'major') {
        // define the musical notes and their corresponding values
        const notes = {
          'C4': 0,
          'C#4': 1,
          'D4': 2,
          'D#4': 3,
          'E4': 4,
          'F4': 5,
          'F#4': 6,
          'G4': 7,
          'G#4': 8,
          'A4': 9,
          'A#4': 10,
          'B4': 11
        };

        // define the chord types and their corresponding intervals
        const chordTypes = {
          'major': [0, 4, 7],
          'minor': [0, 3, 7],
          'diminished': [0, 3, 6],
          'augmented': [0, 4, 8],
          // add more chord types as desired
        };

        // get the root note value
        const rootNoteValue = notes[rootNote];

        // get the intervals for the specified chord type
        const chordIntervals = chordTypes[chordType];

        // create an array of notes for the chord based on the root note and intervals
        const chordNotes = chordIntervals.map(interval => notes[(rootNoteValue + interval) % 12]);

        displayChordTest = document.getElementById('test').innerHTML;
        let chordString = chordNotes.toString();
        document.getElementById("test").innerHTML = chordString;

        // return the array of chord notes
        //return chordNotes;
      }

    </script>

</body>

</html>